# spring
Các ví dụ liên quan đến Spring/SpringBoot từ cơ bản đến nâng cao<br/>
Mỗi nhánh trong Repo sẽ là 1 ví dụ/ giải pháp/ project mẫu trong Spring

# Môi trường phát triển
- Spring Boot 2.7.16
- JDK 11

# Build Tools sử dụng
- Maven + Gradle
- Intelij IDEA

# Folder liên quan trên Windows
```
D:\Projects\spring
```

==============================================================

# Ví dụ [06.JPA+PostgreSQL]
==============================================================

**Tham khảo**
- https://github.com/yandex-qatools/postgresql-embedded
- https://stackoverflow.com/questions/14314026/embedded-postgresql-for-java-junit-tests
- https://www.baeldung.com/spring-boot-configure-data-source-programmatic

**Ta sẽ tạo 1 App Spring Boot sử dụng JPA cho PostgreSQL Database như sau :**<br/>
- Start ở port 8100
- PostgreSQL DB, sử dụng Docker để test
```shell
  ./00.start-db.sh
  
  ./01.stop-db.sh
```
- Script tạo data nằm trong file /resource/data.sql và được load trước khi init JPA<br/>
  (script này chạy tốt với PostreSQL ở môi trường thực hoặc H2 cho Integration Tests )


**Tham khảo kết quả khi start WebApp & kết nối với PostgreSQL DB:**
```shell
00:01:00: Executing ':JPAPostgresApplication.main()'...

> Task :compileJava
> Task :processResources
> Task :classes

> Task :JPAPostgresApplication.main()

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v2.7.16)

00:01:02.578 [main] INFO  - Starting JPAPostgresApplication using Java 11.0.15 on tdc with PID 65739 (/home/tdc/spring/jpa-postgres/build/classes/java/main started by tdc in /home/tdc/spring/jpa-postgres)
00:01:02.588 [main] INFO  - No active profile set, falling back to 1 default profile: "default"
00:01:03.402 [main] INFO  - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
00:01:03.461 [main] INFO  - Finished Spring Data repository scanning in 49 ms. Found 1 JPA repository interfaces.
00:01:04.188 [main] INFO  - Tomcat initialized with port(s): 8100 (http)
00:01:04.196 [main] INFO  - Initializing ProtocolHandler ["http-nio-8100"]
00:01:04.199 [main] INFO  - Starting service [Tomcat]
00:01:04.199 [main] INFO  - Starting Servlet engine: [Apache Tomcat/9.0.80]
00:01:04.320 [main] INFO  - Initializing Spring embedded WebApplicationContext
00:01:04.320 [main] INFO  - Root WebApplicationContext: initialization completed in 1657 ms
00:01:04.431 [main] INFO  - HikariPool-1 - Starting...
00:01:04.556 [main] INFO  - HikariPool-1 - Start completed.
00:01:04.927 [main] INFO  - HHH000204: Processing PersistenceUnitInfo [name: default]
00:01:04.975 [main] INFO  - HHH000412: Hibernate ORM core version 5.6.15.Final
00:01:05.150 [main] INFO  - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
00:01:05.269 [main] INFO  - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL95Dialect
00:01:05.892 [main] INFO  - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
00:01:05.904 [main] INFO  - Initialized JPA EntityManagerFactory for persistence unit 'default'
00:01:06.592 [main] WARN  - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
00:01:06.934 [main] INFO  - Starting ProtocolHandler ["http-nio-8100"]
00:01:06.950 [main] INFO  - Tomcat started on port(s): 8100 (http) with context path ''
00:01:06.960 [main] INFO  - Started JPAPostgresApplication in 4.858 seconds (JVM running for 5.517)
00:01:06.980 [main] INFO  - [MAIN] Start running some initialize CLI ...
00:01:06.980 [main] INFO  - --------------------------------------------------------
00:01:07.010 [main] INFO  - [MAIN] Total of users: 15
00:01:07.062 [main] INFO  - [MAIN] findAll() = [User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=2, name=John, password=Pwd-John, email=john@gmail.com, description=Description for Join, birthday=2010-11-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=3, name=Smith, password=Pwd-Smith, email=smt@test.com, description=Description for Smith, birthday=2005-01-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=5, name=Mary, password=Pwd-Mary, email=marry@test.com, description=Description for Mary, birthday=2015-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=6, name=Margaret, password=Pwd-Margaret, email=magrt@test.com, description=Description for Margaret, birthday=2009-05-11 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=7, name=James, password=Pwd-James, email=james@test.com, description=Description for James, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=8, name=Carlos, password=Pwd-Carlos, email=cal@test.com, description=Description for Carlos, birthday=1999-06-11 00:00:00.0, active=true, createDate=2017-02-03 00:00:00.0), User(id=9, name=Peter, password=Pwd-Peter, email=petter@test.com, description=Description for Peter, birthday=2005-03-11 00:00:00.0, active=true, createDate=2021-11-03 00:00:00.0), User(id=10, name=James, password=Pwd-James10, email=james10@test.com, description=Description for James10, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:01:07.080 [main] INFO  - [MAIN] findAll(Sort.by('name')) = [User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=8, name=Carlos, password=Pwd-Carlos, email=cal@test.com, description=Description for Carlos, birthday=1999-06-11 00:00:00.0, active=true, createDate=2017-02-03 00:00:00.0), User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=7, name=James, password=Pwd-James, email=james@test.com, description=Description for James, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=10, name=James, password=Pwd-James10, email=james10@test.com, description=Description for James10, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=2, name=John, password=Pwd-John, email=john@gmail.com, description=Description for Join, birthday=2010-11-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=6, name=Margaret, password=Pwd-Margaret, email=magrt@test.com, description=Description for Margaret, birthday=2009-05-11 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=5, name=Mary, password=Pwd-Mary, email=marry@test.com, description=Description for Mary, birthday=2015-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=9, name=Peter, password=Pwd-Peter, email=petter@test.com, description=Description for Peter, birthday=2005-03-11 00:00:00.0, active=true, createDate=2021-11-03 00:00:00.0), User(id=3, name=Smith, password=Pwd-Smith, email=smt@test.com, description=Description for Smith, birthday=2005-01-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:01:07.097 [main] INFO  - [MAIN] findByName('Paul') = User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0)
00:01:07.102 [main] INFO  - [MAIN] findFirstByOrderByNameAsc() = User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0)
00:01:07.108 [main] INFO  - [MAIN] findTopByOrderByDescriptionDesc() = User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)
00:01:07.120 [main] INFO  - [MAIN] queryFirst10ByName() = Page 1 of 2 containing demo.jpa_postgres.entities.User instances
00:01:07.132 [main] INFO  - [MAIN] findDataCustomSQL() = [User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
```

**Tham khảo kết quả khi chạy Integration Tests & sử dụng Embbed Postgres DB:**<br/>
(Trong TH này thì ta sẽ config 1 Bean DataSource dành riêng cho việc testing trong file `DS4TestingConfiguration`)
```shell
Starting Gradle Daemon...
Gradle Daemon started in 1 s 253 ms

> Task :compileJava UP-TO-DATE
> Task :processResources UP-TO-DATE
> Task :classes UP-TO-DATE
> Task :compileTestJava
Note: /home/tdc/spring/jpa-postgres/src/test/java/demo/jpa_postgres/DS4TestingConfiguration.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
> Task :processTestResources
> Task :testClasses
> Task :test
00:01:59.624 [Test worker] INFO  - Neither @ContextConfiguration nor @ContextHierarchy found for test class [demo.jpa_postgres.JPAPostgresApplicationTests], using SpringBootContextLoader
00:01:59.633 [Test worker] INFO  - Could not detect default resource locations for test class [demo.jpa_postgres.JPAPostgresApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.
00:01:59.634 [Test worker] INFO  - Could not detect default configuration classes for test class [demo.jpa_postgres.JPAPostgresApplicationTests]: JPAPostgresApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
00:01:59.749 [Test worker] INFO  - Found @SpringBootConfiguration demo.jpa_postgres.JPAPostgresApplication for test class demo.jpa_postgres.JPAPostgresApplicationTests
00:01:59.838 [Test worker] INFO  - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
00:01:59.853 [Test worker] INFO  - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@36453307, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7dcc91fd, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@66eb985d, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6a9287b1, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@75504cef, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6c8a68c1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@56193c7d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@28c88600, org.springframework.test.context.event.EventPublishingTestExecutionListener@5f8890c2, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@607b2792, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7f9e1534, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@138a7441, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@81ff872, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@31611954, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3e598df9]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v2.7.16)

00:02:00.227 [Test worker] INFO  - Starting JPAPostgresApplicationTests using Java 11.0.15 on tdc with PID 66220 (started by tdc in /home/tdc/spring/jpa-postgres)
00:02:00.229 [Test worker] INFO  - The following 1 profile is active: "test"
00:02:00.968 [Test worker] INFO  - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
00:02:01.026 [Test worker] INFO  - Finished Spring Data repository scanning in 42 ms. Found 1 JPA repository interfaces.
00:02:01.487 [Test worker] INFO  - HikariPool-1 - Starting...
00:02:01.597 [Test worker] INFO  - HikariPool-1 - Start completed.
00:02:01.820 [Test worker] INFO  - HHH000204: Processing PersistenceUnitInfo [name: default]
00:02:01.888 [Test worker] INFO  - HHH000412: Hibernate ORM core version 5.6.15.Final
00:02:02.066 [Test worker] INFO  - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
00:02:02.178 [Test worker] INFO  - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL95Dialect
00:02:02.752 [Test worker] INFO  - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
00:02:02.763 [Test worker] INFO  - Initialized JPA EntityManagerFactory for persistence unit 'default'
00:02:03.586 [Test worker] WARN  - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
00:02:04.243 [Test worker] INFO  - Started JPAPostgresApplicationTests in 4.356 seconds (JVM running for 5.639)
00:02:04.265 [Test worker] INFO  - [MAIN] Start running some initialize CLI ...
00:02:04.265 [Test worker] INFO  - --------------------------------------------------------
00:02:04.295 [Test worker] INFO  - [MAIN] Total of users: 15
00:02:04.338 [Test worker] INFO  - [MAIN] findAll() = [User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=2, name=John, password=Pwd-John, email=john@gmail.com, description=Description for Join, birthday=2010-11-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=3, name=Smith, password=Pwd-Smith, email=smt@test.com, description=Description for Smith, birthday=2005-01-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=5, name=Mary, password=Pwd-Mary, email=marry@test.com, description=Description for Mary, birthday=2015-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=6, name=Margaret, password=Pwd-Margaret, email=magrt@test.com, description=Description for Margaret, birthday=2009-05-11 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=7, name=James, password=Pwd-James, email=james@test.com, description=Description for James, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=8, name=Carlos, password=Pwd-Carlos, email=cal@test.com, description=Description for Carlos, birthday=1999-06-11 00:00:00.0, active=true, createDate=2017-02-03 00:00:00.0), User(id=9, name=Peter, password=Pwd-Peter, email=petter@test.com, description=Description for Peter, birthday=2005-03-11 00:00:00.0, active=true, createDate=2021-11-03 00:00:00.0), User(id=10, name=James, password=Pwd-James10, email=james10@test.com, description=Description for James10, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:02:04.355 [Test worker] INFO  - [MAIN] findAll(Sort.by('name')) = [User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=8, name=Carlos, password=Pwd-Carlos, email=cal@test.com, description=Description for Carlos, birthday=1999-06-11 00:00:00.0, active=true, createDate=2017-02-03 00:00:00.0), User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=7, name=James, password=Pwd-James, email=james@test.com, description=Description for James, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=10, name=James, password=Pwd-James10, email=james10@test.com, description=Description for James10, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=2, name=John, password=Pwd-John, email=john@gmail.com, description=Description for Join, birthday=2010-11-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=6, name=Margaret, password=Pwd-Margaret, email=magrt@test.com, description=Description for Margaret, birthday=2009-05-11 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=5, name=Mary, password=Pwd-Mary, email=marry@test.com, description=Description for Mary, birthday=2015-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=9, name=Peter, password=Pwd-Peter, email=petter@test.com, description=Description for Peter, birthday=2005-03-11 00:00:00.0, active=true, createDate=2021-11-03 00:00:00.0), User(id=3, name=Smith, password=Pwd-Smith, email=smt@test.com, description=Description for Smith, birthday=2005-01-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:02:04.371 [Test worker] INFO  - [MAIN] findByName('Paul') = User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0)
00:02:04.375 [Test worker] INFO  - [MAIN] findFirstByOrderByNameAsc() = User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0)
00:02:04.381 [Test worker] INFO  - [MAIN] findTopByOrderByDescriptionDesc() = User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)
00:02:04.391 [Test worker] INFO  - [MAIN] queryFirst10ByName() = Page 1 of 2 containing demo.jpa_postgres.entities.User instances
00:02:04.401 [Test worker] INFO  - [MAIN] findDataCustomSQL() = [User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:02:04.431 [Test worker] INFO  - Began transaction (1) for test context [DefaultTestContext@22a2e581 testClass = JPAPostgresApplicationTests, testInstance = demo.jpa_postgres.JPAPostgresApplicationTests@7ca8f5d7, testMethod = contextLoads@JPAPostgresApplicationTests, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@2dc319cf testClass = JPAPostgresApplicationTests, locations = '{}', classes = '{class demo.jpa_postgres.JPAPostgresApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@1568159, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@593e824f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5d25e6bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@7c041b41, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5217f3d0, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@638ef7ed], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@14580edc]; rollback [true]
00:02:04.530 [Test worker] INFO  - [TEST] Total of users: 15
00:02:04.530 [Test worker] INFO  - --------------------------------------------------------
00:02:04.535 [Test worker] INFO  - [TEST] findAll() = [User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=2, name=John, password=Pwd-John, email=john@gmail.com, description=Description for Join, birthday=2010-11-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=3, name=Smith, password=Pwd-Smith, email=smt@test.com, description=Description for Smith, birthday=2005-01-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=5, name=Mary, password=Pwd-Mary, email=marry@test.com, description=Description for Mary, birthday=2015-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=6, name=Margaret, password=Pwd-Margaret, email=magrt@test.com, description=Description for Margaret, birthday=2009-05-11 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=7, name=James, password=Pwd-James, email=james@test.com, description=Description for James, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=8, name=Carlos, password=Pwd-Carlos, email=cal@test.com, description=Description for Carlos, birthday=1999-06-11 00:00:00.0, active=true, createDate=2017-02-03 00:00:00.0), User(id=9, name=Peter, password=Pwd-Peter, email=petter@test.com, description=Description for Peter, birthday=2005-03-11 00:00:00.0, active=true, createDate=2021-11-03 00:00:00.0), User(id=10, name=James, password=Pwd-James10, email=james10@test.com, description=Description for James10, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:02:04.540 [Test worker] INFO  - [TEST] findAll(Sort.by('name')) = [User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=8, name=Carlos, password=Pwd-Carlos, email=cal@test.com, description=Description for Carlos, birthday=1999-06-11 00:00:00.0, active=true, createDate=2017-02-03 00:00:00.0), User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=7, name=James, password=Pwd-James, email=james@test.com, description=Description for James, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=10, name=James, password=Pwd-James10, email=james10@test.com, description=Description for James10, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=2, name=John, password=Pwd-John, email=john@gmail.com, description=Description for Join, birthday=2010-11-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=6, name=Margaret, password=Pwd-Margaret, email=magrt@test.com, description=Description for Margaret, birthday=2009-05-11 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=5, name=Mary, password=Pwd-Mary, email=marry@test.com, description=Description for Mary, birthday=2015-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=9, name=Peter, password=Pwd-Peter, email=petter@test.com, description=Description for Peter, birthday=2005-03-11 00:00:00.0, active=true, createDate=2021-11-03 00:00:00.0), User(id=3, name=Smith, password=Pwd-Smith, email=smt@test.com, description=Description for Smith, birthday=2005-01-12 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:02:04.543 [Test worker] INFO  - [TEST] findByName('Paul') = User(id=4, name=Paul, password=Pwd-Paul, email=pl@test.com, description=Description for Paul, birthday=2005-05-07 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0)
00:02:04.545 [Test worker] INFO  - [TEST] findFirstByOrderByNameAsc() = User(id=1, name=Alex, password=Pwd-Alex, email=alex@test.com, description=Description for ALex, birthday=2020-01-02 00:00:00.0, active=true, createDate=2021-02-03 00:00:00.0)
00:02:04.547 [Test worker] INFO  - [TEST] findTopByOrderByDescriptionDesc() = User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)
00:02:04.552 [Test worker] INFO  - [TEST] queryFirst10ByName() = Page 1 of 2 containing demo.jpa_postgres.entities.User instances
00:02:04.554 [Test worker] INFO  - [TEST] findDataCustomSQL() = [User(id=11, name=James, password=Pwd-James11, email=james11@test.com, description=Description for James11, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=15, name=James, password=Pwd-James15, email=james15@test.com, description=Description for James15, birthday=1990-05-11 00:00:00.0, active=true, createDate=2011-02-03 00:00:00.0), User(id=17, name=Andy, password=Pwd-Andy, email=andy@test.com, description=Description for Andy, birthday=2022-05-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=22, name=Android, password=Pwd-Android, email=andr@test.com, description=Description for Android, birthday=2021-04-11 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0), User(id=30, name=iOS, password=Pwd-iOS, email=ioss@test.com, description=Description for iOS, birthday=2022-01-12 00:00:00.0, active=true, createDate=2014-02-03 00:00:00.0)]
00:02:04.567 [Test worker] INFO  - Rolled back transaction for test: [DefaultTestContext@22a2e581 testClass = JPAPostgresApplicationTests, testInstance = demo.jpa_postgres.JPAPostgresApplicationTests@7ca8f5d7, testMethod = contextLoads@JPAPostgresApplicationTests, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@2dc319cf testClass = JPAPostgresApplicationTests, locations = '{}', classes = '{class demo.jpa_postgres.JPAPostgresApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@1568159, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@593e824f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5d25e6bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@7c041b41, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5217f3d0, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@638ef7ed], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]
00:02:04.575 [Test worker] WARN  - [TEST] stopEmbbedPostgresSQL ... 
00:02:04.596 [SpringApplicationShutdownHook] INFO  - Closing JPA EntityManagerFactory for persistence unit 'default'
00:02:04.599 [SpringApplicationShutdownHook] INFO  - HikariPool-1 - Shutdown initiated...
00:02:04.613 [SpringApplicationShutdownHook] INFO  - HikariPool-1 - Shutdown completed.
Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.
You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.
For more on this, please refer to https://docs.gradle.org/8.2.1/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.
BUILD SUCCESSFUL in 16s
5 actionable tasks: 3 executed, 2 up-to-date
00:02:04: Execution finished ':test --tests "demo.jpa_postgres.JPAPostgresApplicationTests"'.
```

**Một số API từ Controller để tương tác vào DB**
```shell
  http://localhost:8100/user/all
  http://localhost:8100/user/findbyid?id=5
  http://localhost:8100/user/find-by-active?active=true
  http://localhost:8100/user/find-by-active?active=false
  
  http://localhost:8100/user/find-all-by-page?page=2&size=5
  http://localhost:8100/user/find-all-by-page-sort?page=2&size=5&sortField=name&sortType=desc
  
  http://localhost:8100/user/insert?numOfUsers=3
  http://localhost:8100/user/update?fromId=4&toId=10&newNamePrefix=MY-PREFIX&maxUpdateItems=2
  
  http://localhost:8100/user/sort?sortField=createDate&sortType=desc
  
  http://localhost:8100/user/custom-sql
  
  ...... còn nữa, mà lười liệt kê :) ....

```
